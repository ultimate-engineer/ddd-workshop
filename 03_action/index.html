
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="DDD in action Workshop: Strategies and tactics for Java solutions" name="description"/>
<meta content="Karina Varela and OtÃ¡vio Santana" name="author"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.3.8" name="generator"/>
<title>3rd Action, the Movie: Establishing Boundaries and Context Mapping - DDD in Action: Strategies and tactics for Java solutions</title>
<link href="../assets/stylesheets/main.1d29e8d0.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 17a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H9.46c.35.61.54 1.3.54 2h10v11h-9v2m4-10v2H9v13H7v-6H5v6H3v-8H1.5V9a2 2 0 0 1 2-2H15M8 4a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2Z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.13 22.19-1.63-3.83c1.57-.58 3.04-1.36 4.4-2.27l-2.77 6.1M5.64 12.5l-3.83-1.63 6.1-2.77C7 9.46 6.22 10.93 5.64 12.5M21.61 2.39S16.66.269 11 5.93c-2.19 2.19-3.5 4.6-4.35 6.71-.28.75-.09 1.57.46 2.13l2.13 2.12c.55.56 1.37.74 2.12.46A19.1 19.1 0 0 0 18.07 13c5.66-5.66 3.54-10.61 3.54-10.61m-7.07 7.07c-.78-.78-.78-2.05 0-2.83s2.05-.78 2.83 0c.77.78.78 2.05 0 2.83-.78.78-2.05.78-2.83 0m-5.66 7.07-1.41-1.41 1.41 1.41M6.24 22l3.64-3.64c-.34-.09-.67-.24-.97-.45L4.83 22h1.41M2 22h1.41l4.77-4.76-1.42-1.41L2 20.59V22m0-2.83 4.09-4.08c-.21-.3-.36-.62-.45-.97L2 17.76v1.41Z"/></svg>');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="light-blue" data-md-color-primary="blue" data-md-color-scheme="slate" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#3rd-action-the-movie-establishing-boundaries-and-context-mapping">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DDD in Action: Strategies and tactics for Java solutions" class="md-header__button md-logo" data-md-component="logo" href=".." title="DDD in Action: Strategies and tactics for Java solutions">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DDD in Action: Strategies and tactics for Java solutions
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              3rd Action, the Movie: Establishing Boundaries and Context Mapping
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ultimate-engineer/ddd-workshop" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DDD in Action: Strategies and tactics for Java solutions" class="md-nav__button md-logo" data-md-component="logo" href=".." title="DDD in Action: Strategies and tactics for Java solutions">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    DDD in Action: Strategies and tactics for Java solutions
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ultimate-engineer/ddd-workshop" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        About this workshop
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../00_environment/">
        Preparing your environment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../01_action/">
        1st Action, the Bookstore: Getting Started with Domain Storytelling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../02_action/">
        2nd Action, the Taxi: a Domain Storytelling exercise
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          3rd Action, the Movie: Establishing Boundaries and Context Mapping
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        3rd Action, the Movie: Establishing Boundaries and Context Mapping
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#exercise-goals">
    Exercise goals
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario">
    Scenario
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#practicing-domain-storytelling">
    Practicing Domain Storytelling
  </a>
<nav aria-label="Practicing Domain Storytelling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adjusting-the-model-to-match-the-real-user-need">
    Adjusting the model to match the real user need
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#from-a-story-to-the-code-the-cinema-service">
    From a Story to the Code: the Cinema service
  </a>
<nav aria-label="From a Story to the Code: the Cinema service" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#observe-and-learn">
    Observe and learn
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-the-movie-service">
    Testing the Movie Service
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#expanding-the-implementation">
    Expanding the implementation
  </a>
<nav aria-label="Expanding the implementation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#next-step-choosing-the-next-enhancement">
    Next step: choosing the next enhancement
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#an-enhancement-suggestion-allow-customers-to-buy-beverages">
    An enhancement suggestion: Allow customers to buy beverages
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#congratulations">
    Congratulations!
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../06_action/">
        6th Action Java, NoSQL and DDD: Abstracting business away from your db solution
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#exercise-goals">
    Exercise goals
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scenario">
    Scenario
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#practicing-domain-storytelling">
    Practicing Domain Storytelling
  </a>
<nav aria-label="Practicing Domain Storytelling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adjusting-the-model-to-match-the-real-user-need">
    Adjusting the model to match the real user need
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#from-a-story-to-the-code-the-cinema-service">
    From a Story to the Code: the Cinema service
  </a>
<nav aria-label="From a Story to the Code: the Cinema service" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#observe-and-learn">
    Observe and learn
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-the-movie-service">
    Testing the Movie Service
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#expanding-the-implementation">
    Expanding the implementation
  </a>
<nav aria-label="Expanding the implementation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#next-step-choosing-the-next-enhancement">
    Next step: choosing the next enhancement
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#an-enhancement-suggestion-allow-customers-to-buy-beverages">
    An enhancement suggestion: Allow customers to buy beverages
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#congratulations">
    Congratulations!
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="3rd-action-the-movie-establishing-boundaries-and-context-mapping"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.</span> 3rd Action, the Movie: Establishing Boundaries and Context Mapping</h1>
<p>In this exercise you will see how the concepts of <strong>bounded context</strong> and <strong>context mapping</strong> can be applied in real life. </p>
<div class="admonition note">
<p class="admonition-title">Roll up your sleeves, and get to action!</p>
<p>It's time to practice what you have learned and get your hands. Roll up your sleeves and let's get to action!</p>
</div>
<h2 id="exercise-goals"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.1</span> Exercise goals</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"><span class="task-list-indicator"></span></input></label> Fix and Complete the domain storytelling diagram (<code>storytelling/03-cinema</code>) ;</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"><span class="task-list-indicator"></span></input></label> As a developer, explore the existing project (<code>03-cinema</code>) and evaluate code design and implementation choices;</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"><span class="task-list-indicator"></span></input></label> Implement and test one of the missing features described in the diagram, in the existing application;</li>
</ul>
<p>The outcome of this practice should be a <strong>diagram</strong> representation of the <strong>Movie</strong> use case and its respective <strong>java service</strong>.</p>
<h2 id="scenario"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.2</span> Scenario</h2>
<p><strong>Business Goal:</strong> As a moviegoer, I want to go to the movie theater, buy a ticket, maybe get some popcorn and soda, and watch the chosen movie.</p>
<h2 id="practicing-domain-storytelling"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3</span> Practicing Domain Storytelling</h2>
<ol>
<li>Using your browser, access <a href="http://egon.io">Egon.io</a></li>
<li>
<p>Import the diagram located under <code>ddd-workshop-labs/storytelling/03-cinema.dst</code></p>
<p><strong>But wait... it looks like there's something wrong with it!</strong></p>
<p><img alt="03-movie-domain-diagram.png" src="../images/03-movie-domain-diagram.png"/></p>
</li>
</ol>
<p>Luckily, we can use your help to help us fix this diagram and reduce bugs on the final application.</p>
<h3 id="adjusting-the-model-to-match-the-real-user-need"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.1</span> Adjusting the model to match the real user need</h3>
<p>Revisit the diagram and identify which are adjustments that must be done to have a real representation of the user's need;</p>
<p>To explore the use case, rely on the instructor (business person representation) to ask questions to the instructor <em>or</em> discussing with other attendees;</p>
<p>Make sure you pay attention to these items and meet the following requirements:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"><span class="task-list-indicator"></span></input></label> Some actions are certainly missing in this diagram. (<em>Which actions should be mapped for the actors, and are not represented?</em>) </li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"><span class="task-list-indicator"></span></input></label> Describe in the diagram, the <code>sequence order</code> of each action. (<em>To change a group sequence, you can double-click on the association arrow and set your input data;</em>)</li>
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox"><span class="task-list-indicator"></span></input></label> Are there optional items? Add a <code>text annotation</code> to highlight this characteristic. </p>
<p><img alt="03-text-annotation-icon.png" src="../images/03-text-annotation-icon.png"/></p>
</li>
</ul>
<p>Once you're satisfied with the domain map, and you feel like it covers the use case story accordingly, you are ready to
move forward and start designing you Java service.</p>
<p>Our next step is to check the modeling of the application, matching the implementation with the domain exploration details.</p>
<hr/>
<h3 id="from-a-story-to-the-code-the-cinema-service"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.2</span> From a Story to the Code: the Cinema service</h3>
<p>In the <code>ddd-workshop-labs</code> folder, locate and open the project <code>03-cinema</code> using your chosen Java IDE;</p>
<h4 id="observe-and-learn"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.2.1</span> Observe and learn</h4>
<ol>
<li>
<p>Using your IDE or your terminal, pull the project to make sure you are have the latest version of the <code>ddd-workshop-labs</code>.
    <div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>ddd-workshop-labs
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>main<span class="w">    </span>
</span></code></pre></div></p>
</li>
<li>
<p>Open the test class <code>expert.os.workshop.ddd.cinema.OrderTest</code>; </p>
</li>
<li>Now notice the following items:<ol>
<li>Is this test is validating the user story previously described? If not, what are your ideas to adjust it?</li>
<li>In this unit test, we can notice the following validation:</li>
</ol>
</li>
</ol>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="w">    </span><span class="n">Movie</span><span class="w"> </span><span class="n">movie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Movie</span><span class="p">(</span><span class="s">"Matrix"</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1999</span><span class="p">));</span><span class="w"> </span><span class="c1">//(1)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="n">Product</span><span class="w"> </span><span class="n">ticket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Ticket</span><span class="p">(</span><span class="n">movie</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span><span class="w"> </span><span class="c1">//(2)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="n">Product</span><span class="w"> </span><span class="n">popcorn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Food</span><span class="p">(</span><span class="s">"popcorn"</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span><span class="w">  </span><span class="c1">//(3)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Order</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">moviegoer</span><span class="p">);</span><span class="w">    </span><span class="c1">//(4)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="n">order</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ticket</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">    </span><span class="n">order</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">popcorn</span><span class="p">);</span><span class="w"> </span><span class="c1">//(5)!</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="n">MonetaryAmount</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">order</span><span class="p">.</span><span class="na">total</span><span class="p">();</span><span class="w"> </span><span class="c1">//(6)</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertThat</span><span class="p">(</span><span class="n">total</span><span class="p">)</span><span class="w"> </span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">            </span><span class="p">.</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span><span class="w"> </span><span class="c1">//(7)</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>Creates the <code>Movie</code> Matrix, from 1999;</li>
<li>The <code>Ticket</code> for this <code>Movie</code> costs $10;</li>
<li>The <code>Food</code> available to be bought is a popcorn, and it costs $15;</li>
<li>The <code>Moviegoer</code> creates a new order; </li>
<li>This person's <code>Order</code> includes a <code>Ticket</code> for Matrix and his snack, the popcorn.</li>
<li>The <code>Moviegoer</code> needs to pay for the total amount of this order;</li>
<li>Assures the total <code>Order</code> cost is compliant to the business rules; </li>
</ol>
<p>The test validates one of the paths of our storytelling: <em>a user should be able to acquire movie theater tickets
and snacks in order to watch the movie.</em></p>
<p>Due to the domain exploration you've done while adjusting the errors on the domain diagram, 
you probably feel comfortable when reading this text - a result of 
the usage of ubiquitous language across business conversations and the technology scope.</p>
<p>Now, before finishing this project's implementation, navigate through the project and notice the following details:</p>
<div class="admonition question">
<p class="admonition-title">Entities such as <code>Moviegoer</code> and <code>Movie</code> are mapped with <code>org.jmolecules.ddd.annotation.@Entity</code>. How can this annotation be helpful?</p>
</div>
<p>The products sold by this movie theater are defined by the <code>Interface</code> named <code>Product</code>. 
<div class="language-java highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Food</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">MonetaryAmount</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Ticket</span><span class="w"> </span><span class="p">(</span><span class="n">Movie</span><span class="w"> </span><span class="n">movie</span><span class="p">,</span><span class="w"> </span><span class="n">MonetaryAmount</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div></p>
<p>Notice that by relying on the power of abstraction and CDI, adding a new product using the <code>Order</code> class is really simple: 
either while writing, reading or maintaining the code.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(1)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">product</span><span class="p">,</span><span class="s">"product is required"</span><span class="p">);</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="na">products</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>If new products are made available, the impacts on the <code>Order</code> class should be minimal to none;</li>
</ol>
<h4 id="testing-the-movie-service"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.2.2</span> Testing the Movie Service</h4>
<p>Now, make sure your project is working just fine.</p>
<ol>
<li>
<p>Run the following commands:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">cd</span><span class="w"> </span><span class="mo">03</span><span class="o">-</span><span class="n">cinema</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">mvn</span><span class="w"> </span><span class="n">clean</span><span class="w"> </span><span class="kn">package</span><span class="w"> </span>
</span></code></pre></div>
</li>
</ol>
<p>You should see one test executed successfully, as well as the project build.<br/>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>-------------------------------------------------------
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span>expert.os.workshop.ddd.cinema.OrderTest
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>Mar<span class="w"> </span><span class="m">21</span>,<span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">7</span>:39:08<span class="w"> </span>PM<span class="w"> </span>org.javamoney.moneta.DefaultMonetaryContextFactory<span class="w"> </span>createMonetaryContextNonNullConfig
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>INFO:<span class="w"> </span>Using<span class="w"> </span>custom<span class="w"> </span>MathContext:<span class="w"> </span><span class="nv">precision</span><span class="o">=</span><span class="m">256</span>,<span class="w"> </span><span class="nv">roundingMode</span><span class="o">=</span>HALF_EVEN
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Tests<span class="w"> </span>run:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>Failures:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>Errors:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>Skipped:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>Time<span class="w"> </span>elapsed:<span class="w"> </span><span class="m">0</span>.067<span class="w"> </span>s<span class="w"> </span>-<span class="w"> </span><span class="k">in</span><span class="w"> </span>expert.os.workshop.ddd.cinema.OrderTest
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Results:
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Tests<span class="w"> </span>run:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>Failures:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>Errors:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>Skipped:<span class="w"> </span><span class="m">0</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>------------------------------------------------------------------------
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>BUILD<span class="w"> </span>SUCCESS
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>------------------------------------------------------------------------
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Total<span class="w"> </span>time:<span class="w">  </span><span class="m">1</span>.407<span class="w"> </span>s
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Finished<span class="w"> </span>at:<span class="w"> </span><span class="m">2023</span>-03-21T19:39:09-03:00
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>------------------------------------------------------------------------
</span></code></pre></div></p>
<p>Now, let's expand our implementation and certify the benefits of the Domain Storytelling practice and an application designed
and developed through DDD principles. </p>
<h4 id="expanding-the-implementation"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.2.3</span> Expanding the implementation</h4>
<p>Now, as a developer who recently joined the team, you've learned about the use case through the <strong>Domain Storytelling</strong> 
practice.</p>
<h5 id="next-step-choosing-the-next-enhancement"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.2.3.1</span> Next step: choosing the next enhancement</h5>
<p>At this stage, having looked at the domain diagram and existing code, do you feel comfortable when asked to 
identify which features are still missing and choosing one to implement?</p>
<p>For example. As of now, the Movie Service provides the following capability:</p>
<blockquote>
<p>A <code>Moviegoer</code> registers an <code>Order</code> containing a <code>Ticket</code> and <code>Food</code>, and is informed the total cost;</p>
</blockquote>
<div class="admonition question">
<p class="admonition-title">Can you identify more scenarios to be implemented, based on the diagram <code>03-cinema</code>?</p>
</div>
<p>Now, let's go back to coding.</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Choose one of the discussed scenarios to implement in the <code>03-movie</code> application; </li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Use as much as you can, the terminology described in the domain diagram;</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Implement a unit test to confirm your solution is working. </li>
</ul>
<p>If you need some help, next is some guidance to support you on this task. If you feel comfortable, we recommend you to try to identify and add the
next enhancement based on your interpretation and coding only. </p>
<h5 id="an-enhancement-suggestion-allow-customers-to-buy-beverages"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.3.2.3.2</span> An enhancement suggestion: Allow customers to buy beverages</h5>
<p>As of now, we only support orders with <code>Food</code>. Let's add the <code>Beverage</code> to our solution.</p>
<p><strong>Start through testing the desired user story. An added value from TDD</strong></p>
<ol>
<li>Let's start with the unit test, as stated by TDD (Test Driven Development) practices. 
Open the <code>test.java.expert.os.workshop.ddd.cinema.OrderTest</code> class;</li>
<li>Add a new unit test called <code>shouldSumTotalWithBeverage</code>; Don't forget the "<code>@Test</code>" annotation.</li>
<li>
<p>The test can look like this:</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-40">40</a></span>
<span class="normal"><a href="#__codelineno-6-41">41</a></span>
<span class="normal"><a href="#__codelineno-6-42">42</a></span>
<span class="normal"><a href="#__codelineno-6-43">43</a></span>
<span class="normal"><a href="#__codelineno-6-44">44</a></span>
<span class="normal"><a href="#__codelineno-6-45">45</a></span>
<span class="normal"><a href="#__codelineno-6-46">46</a></span>
<span class="normal"><a href="#__codelineno-6-47">47</a></span>
<span class="normal"><a href="#__codelineno-6-48">48</a></span>
<span class="normal"><a href="#__codelineno-6-49">49</a></span>
<span class="normal"><a href="#__codelineno-6-50">50</a></span>
<span class="normal"><a href="#__codelineno-6-51">51</a></span>
<span class="normal"><a href="#__codelineno-6-52">52</a></span>
<span class="normal"><a href="#__codelineno-6-53">53</a></span>
<span class="normal"><a href="#__codelineno-6-54">54</a></span>
<span class="normal"><a href="#__codelineno-6-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40"></a><span class="w">    </span><span class="nd">@Test</span>
</span><span id="__span-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldTotalWithBeverage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42"></a><span class="w">        </span><span class="n">Movie</span><span class="w"> </span><span class="n">movie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Movie</span><span class="p">(</span><span class="s">"Avatar"</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2022</span><span class="p">));</span>
</span><span id="__span-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43"></a><span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">ticket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Ticket</span><span class="p">(</span><span class="n">movie</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span>
</span><span id="__span-6-44"><a id="__codelineno-6-44" name="__codelineno-6-44"></a><span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">popcorn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Food</span><span class="p">(</span><span class="s">"popcorn"</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span>
</span><span id="__span-6-45"><a id="__codelineno-6-45" name="__codelineno-6-45"></a><span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">soda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Beverage</span><span class="p">(</span><span class="s">"soda"</span><span class="p">,</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span><span class="w">  </span><span class="c1">//(1)</span>
</span><span id="__span-6-46"><a id="__codelineno-6-46" name="__codelineno-6-46"></a><span class="w">        </span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Order</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">moviegoer</span><span class="p">);</span>
</span><span id="__span-6-47"><a id="__codelineno-6-47" name="__codelineno-6-47"></a>
</span><span id="__span-6-48"><a id="__codelineno-6-48" name="__codelineno-6-48"></a><span class="w">        </span><span class="n">order</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ticket</span><span class="p">);</span>
</span><span id="__span-6-49"><a id="__codelineno-6-49" name="__codelineno-6-49"></a><span class="w">        </span><span class="n">order</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">popcorn</span><span class="p">);</span>
</span><span id="__span-6-50"><a id="__codelineno-6-50" name="__codelineno-6-50"></a><span class="w">        </span><span class="n">order</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">soda</span><span class="p">);</span><span class="w"> </span><span class="c1">//(2)</span>
</span><span id="__span-6-51"><a id="__codelineno-6-51" name="__codelineno-6-51"></a>
</span><span id="__span-6-52"><a id="__codelineno-6-52" name="__codelineno-6-52"></a><span class="w">        </span><span class="n">MonetaryAmount</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">order</span><span class="p">.</span><span class="na">total</span><span class="p">();</span>
</span><span id="__span-6-53"><a id="__codelineno-6-53" name="__codelineno-6-53"></a><span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertThat</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
</span><span id="__span-6-54"><a id="__codelineno-6-54" name="__codelineno-6-54"></a><span class="w">                </span><span class="p">.</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="n">currency</span><span class="p">));</span><span class="w"> </span><span class="c1">//(3)</span>
</span><span id="__span-6-55"><a id="__codelineno-6-55" name="__codelineno-6-55"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>Creates a new beverage abstrated as a product</li>
<li>Adds the beverage "soda" to the order;</li>
<li>Asserts that the total now includes the beverage cost;</li>
</ol>
</li>
</ol>
<p><strong>Creating a beverage model that meets the test requirements</strong></p>
<p>Now, your application is breaking, as expected. It's time to create the entity <code>Beverage</code>.</p>
<ol>
<li>In the package <code>expert.os.workshop.ddd.cinema</code>, create a new class called <code>Beverage.java</code>. It can look as the sample below.
      <div class="language-java highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">expert.os.workshop.ddd.cinema</span><span class="p">;</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.money.MonetaryAmount</span><span class="p">;</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Beverage</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">MonetaryAmount</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
      Notice we can rely on the <code>Product</code> interface to garantee it will behave as expecteed for a <code>Product</code> in this domain.</li>
<li>Using your IDE or a command line, run the maven test and check the resulting output.
    <div class="language-shell highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>mvn<span class="w"> </span>clean<span class="w"> </span><span class="nb">test</span>
</span></code></pre></div></li>
</ol>
<p>If everything is right, it should have executed successfully.<br/>
Why did the price was correctly calculated even though we didn't add new business logic to the order?</p>
<hr/>
<h2 id="congratulations"><span class="enumerate-headings-plugin enumerate-heading-plugin">4.4</span> Congratulations!</h2>
<p>You've done a great job so far. Let's keep on adding new concepts and technologies to our exercises.</p>
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-03-22</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 2nd Action, the Taxi: a Domain Storytelling exercise" class="md-footer__link md-footer__link--prev" href="../02_action/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              2nd Action, the Taxi: a Domain Storytelling exercise
            </div>
</div>
</a>
<a aria-label="Next: 6th Action Java, NoSQL and DDD: Abstracting business away from your db solution" class="md-footer__link md-footer__link--next" href="../06_action/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              6th Action Java, NoSQL and DDD: Abstracting business away from your db solution
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Developed with Ultimate Sophistication
    </div>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "navigation.instant", "navigation.tracking", "navigation.prune", "toc.follow", "navigation.top", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../assets/javascripts/bundle.0238f547.min.js"></script>
</body>
</html>